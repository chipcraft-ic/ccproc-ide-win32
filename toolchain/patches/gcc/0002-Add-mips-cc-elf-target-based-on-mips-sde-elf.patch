From bb2bbf10619744713edfbe7925d51f5cbbbe8f31 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Rafa=C5=82=20Harabie=C5=84?= <rafalh1992@o2.pl>
Date: Fri, 28 Jul 2017 17:10:15 +0200
Subject: Add mips*-cc-elf* target based on mips*-sde-elf*.

---
 configure      | 4 ++--
 configure.ac   | 4 ++--
 gcc/config.gcc | 5 +++++
 3 files changed, 9 insertions(+), 4 deletions(-)

diff --git a/configure b/configure
index 32ee91f94..f0a0aff9f 100755
--- a/configure
+++ b/configure
@@ -3839,7 +3839,7 @@ case "${target}" in
   microblaze*)
     noconfigdirs="$noconfigdirs gprof"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     if test x$with_newlib = xyes; then
       noconfigdirs="$noconfigdirs gprof"
     fi
@@ -6864,7 +6864,7 @@ case "${target}" in
   spu-*-*)
     target_makefile_frag="config/mt-spu"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     target_makefile_frag="config/mt-sde"
     ;;
   mipsisa*-*-elfoabi*)
diff --git a/configure.ac b/configure.ac
index 123774992..5a071c68d 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1167,7 +1167,7 @@ case "${target}" in
   microblaze*)
     noconfigdirs="$noconfigdirs gprof"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     if test x$with_newlib = xyes; then
       noconfigdirs="$noconfigdirs gprof"
     fi
@@ -2462,7 +2462,7 @@ case "${target}" in
   spu-*-*)
     target_makefile_frag="config/mt-spu"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     target_makefile_frag="config/mt-sde"
     ;;
   mipsisa*-*-elfoabi*)
diff --git a/gcc/config.gcc b/gcc/config.gcc
index 3e41aa5b7..6a807dabe 100644
--- a/gcc/config.gcc
+++ b/gcc/config.gcc
@@ -2151,6 +2151,11 @@ mips*-img-elf*)
 	with_arch_32="mips32r6"
 	with_arch_64="mips64r6"
 	;;
+mips*-cc-elf*)
+	tm_file="elfos.h newlib-stdint.h ${tm_file} mips/elf.h mips/n32-elf.h mips/sde.h"
+	tmake_file="mips/t-sde"
+	tm_defines="${tm_defines} MIPS_ISA_DEFAULT=1 MIPS_ABI_DEFAULT=ABI_32"
+	;;
 mips*-sde-elf*)
 	tm_file="elfos.h newlib-stdint.h ${tm_file} mips/elf.h mips/n32-elf.h mips/sde.h"
 	tmake_file="mips/t-sde"
-- 
2.17.1

