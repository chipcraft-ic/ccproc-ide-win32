From 3bf42601a0a0578784997c7295252e12a473b492 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Rafa=C5=82=20Harabie=C5=84?= <rafalh1992@o2.pl>
Date: Fri, 28 Jul 2017 16:01:38 +0200
Subject: Add mips*-cc-elf* target based on mips*-sde-elf*.

---
 bfd/config.bfd                        | 2 +-
 configure                             | 4 ++--
 configure.ac                          | 4 ++--
 gas/configure.tgt                     | 2 +-
 gas/testsuite/gas/mips/mips.exp       | 4 ++--
 ld/configure.tgt                      | 2 +-
 ld/testsuite/ld-mips-elf/mips-elf.exp | 4 ++--
 7 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/bfd/config.bfd b/bfd/config.bfd
index c0312162..eda973b9 100644
--- a/bfd/config.bfd
+++ b/bfd/config.bfd
@@ -1158,7 +1158,7 @@ case "${targ}" in
     targ_defvec=mips_elf32_trad_le_vec
     targ_selvecs="mips_elf32_trad_be_vec mips_elf32_ntrad_be_vec mips_elf32_ntrad_le_vec mips_elf64_trad_be_vec mips_elf64_trad_le_vec"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     targ_defvec=mips_elf32_trad_be_vec
     targ_selvecs="mips_elf32_trad_le_vec mips_elf32_ntrad_be_vec mips_elf32_ntrad_le_vec mips_elf64_trad_be_vec mips_elf64_trad_le_vec"
     ;;
diff --git a/configure b/configure
index f6d12b87..625afc7c 100755
--- a/configure
+++ b/configure
@@ -3914,7 +3914,7 @@ case "${target}" in
   microblaze*)
     noconfigdirs="$noconfigdirs gprof"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     if test x$with_newlib = xyes; then
       noconfigdirs="$noconfigdirs gprof"
     fi
@@ -6947,7 +6947,7 @@ case "${target}" in
   spu-*-*)
     target_makefile_frag="config/mt-spu"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     target_makefile_frag="config/mt-sde"
     ;;
   mipsisa*-*-elfoabi*)
diff --git a/configure.ac b/configure.ac
index 7a87f17d..9e91a52c 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1250,7 +1250,7 @@ case "${target}" in
   microblaze*)
     noconfigdirs="$noconfigdirs gprof"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     if test x$with_newlib = xyes; then
       noconfigdirs="$noconfigdirs gprof"
     fi
@@ -2551,7 +2551,7 @@ case "${target}" in
   spu-*-*)
     target_makefile_frag="config/mt-spu"
     ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
     target_makefile_frag="config/mt-sde"
     ;;
   mipsisa*-*-elfoabi*)
diff --git a/gas/configure.tgt b/gas/configure.tgt
index 711d537e..58f6d99b 100644
--- a/gas/configure.tgt
+++ b/gas/configure.tgt
@@ -342,7 +342,7 @@ case ${generic_target} in
   mips*-*-freebsd* | mips*-*-kfreebsd*-gnu)
 					fmt=elf em=freebsd ;;
   mips-*-sysv4*MP* | mips-*-gnu*)	fmt=elf em=tmips ;;
-  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+  mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
 					fmt=elf em=tmips ;;
   mips-*-elf* | mips-*-rtems*)		fmt=elf ;;
   mips-*-netbsd*)			fmt=elf em=tmips ;;
diff --git a/gas/testsuite/gas/mips/mips.exp b/gas/testsuite/gas/mips/mips.exp
index 5a695427..78eec0d1 100644
--- a/gas/testsuite/gas/mips/mips.exp
+++ b/gas/testsuite/gas/mips/mips.exp
@@ -541,12 +541,12 @@ if { [istarget mips*-*-vxworks*] } {
 		     || [istarget mipsisa32-*-linux*] || [istarget mipsisa32el-*-linux*]]
     set has_newabi [expr [istarget *-*-irix6*] || [istarget mips*-*-linux*] \
                          || [istarget mips*-sde-elf*] || [istarget mips*-mti-elf*] \
-                         || [istarget mips*-img-elf*]]
+                         || [istarget mips*-img-elf*] || [istarget mips*-cc-elf*]]
 
     if { [istarget "mips*-*-*linux*"]
 	 || [istarget "mips*-sde-elf*"]
 	 || [istarget "mips*-mti-elf*"]
-	 || [istarget "mips*-img-elf*"]
+	 || [istarget "mips*-img-elf*"] || [istarget "mips*-cc-elf*"]
 	 || [istarget "mips*-*-*bsd*"] } then {
 	set tmips "t"
     } else {
diff --git a/ld/configure.tgt b/ld/configure.tgt
index b85c6bb3..dbd30e5a 100644
--- a/ld/configure.tgt
+++ b/ld/configure.tgt
@@ -501,7 +501,7 @@ mips*vr5000-*-elf*)	targ_emul=elf32b4300 ;;
 mips*el-sde-elf* | mips*el-mti-elf* | mips*el-img-elf*)
 			targ_emul=elf32ltsmip
 			targ_extra_emuls="elf32btsmip elf32ltsmipn32 elf64ltsmip elf32btsmipn32 elf64btsmip" ;;
-mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf*)
+mips*-sde-elf* | mips*-mti-elf* | mips*-img-elf* | mips*-cc-elf*)
 			targ_emul=elf32btsmip
 			targ_extra_emuls="elf32ltsmip elf32btsmipn32 elf64btsmip elf32ltsmipn32 elf64ltsmip" ;;
 mips64*el-ps2-elf*)	targ_emul=elf32lr5900n32
diff --git a/ld/testsuite/ld-mips-elf/mips-elf.exp b/ld/testsuite/ld-mips-elf/mips-elf.exp
index 7fa11c59..4f345186 100644
--- a/ld/testsuite/ld-mips-elf/mips-elf.exp
+++ b/ld/testsuite/ld-mips-elf/mips-elf.exp
@@ -56,7 +56,7 @@ set has_newabi [expr [istarget *-*-irix6*] \
 		     || [istarget mips*-*-linux*] \
 		     || [istarget mips*-sde-elf*] \
 		     || [istarget mips*-mti-elf*] \
-		     || [istarget mips*-img-elf*]]
+		     || [istarget mips*-img-elf*] || [istarget mips*-cc-elf*]]
 set linux_gnu [expr [istarget mips*-*-linux*]]
 set embedded_elf [expr [istarget mips*-*-elf]]
 
@@ -80,7 +80,7 @@ if { [istarget *-*-irix6*] } {
     set abi_ldflags(o32) -melf32btsmip_fbsd
 }
 if { [istarget mips*-*-linux*] || [istarget mips*-sde-elf*]
-     || [istarget mips*-mti-elf*] || [istarget mips*-img-elf*]} {
+     || [istarget mips*-mti-elf*] || [istarget mips*-img-elf*] || [istarget mips*-cc-elf*]} {
     set abi_ldflags(n32) -melf32btsmipn32
     set abi_ldflags(n64) -melf64btsmip
 } elseif { [istarget mips64*-*freebsd*] } {
-- 
2.17.1

